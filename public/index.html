<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link rel="stylesheet" type="text/css" href="style.css" />
        <script src="http://code.jquery.com/jquery.min.js"></script>
        <script src="http://coffeescript.org/extras/coffee-script.js"></script>
        <script src="/socket.io/socket.io.js"></script>
        
        <script type="text/coffeescript">
            
            #local f12:06 s12:45 
            
            #s5568-f8069 s10570
            #s11:53-f12:19:45 12:54:45-12:59:58
            
            $ ->

                socket = io.connect document.domain

                socket.on 'client.users.total', (count) ->
                    $('h1.users span').html count
                    
                socket.on 'client.queue.total', (count) ->
                    $('h1.queue span').html count
                    
                socket.on 'client.queue.newentry', (count) ->
                    $('h1.new span').html count
                    
                socket.on 'client.rate.limit', (rate) ->
                
                    if rate?.message
                        $('h1.rate span.limit').html rate.message
                        $('h1.rate span.remaining').html ''
                        
                    else if rate?.rate
                        $('h1.rate span.limit').html rate.rate.limit
                        $('h1.rate span.remaining').html rate.rate.remaining
                
                socket.on 'client.users.search', (users) ->
                    console.log users
                    
                socket.emit 'server.user.search', 'ghost'
                
                socket.emit 'server.users.add', 'symfony'
                
                
                update = () ->
                    socket.emit 'server.users.total'
                    socket.emit 'server.queue.total'
                    socket.emit 'server.rate.limit'
                    socket.emit 'server.queue.newentry'
                    
                update()
                
                setInterval update, 1000

        </script>
    </head>
    <body>
    
        <h1 class="new">New Entries: <span></span></h1>
        <h1 class="users">Users Indexed: <span></span></h1>
        <h1 class="queue">Users in Queue: <span></span></h1>
        <h1 class="rate">Rate Limit: <span class="remaining"></span> / <span class="limit"></span></h1>
    
        <ul id="users"></ul>
    </body>
</html>
